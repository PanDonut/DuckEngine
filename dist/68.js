"use strict";(global.webpackChunkelectron_react_webpack_boilerplate=global.webpackChunkelectron_react_webpack_boilerplate||[]).push([[68],{68:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(413),r=n(977),l=n(294),i=n(964),o=n(882),c=n(694);const s=n.p+"aa0af0059f420dc482ea36f033f3a13c.mp3",m=n.p+"1f00a8151d98f7b3cc102fce717d6ebd.gltf";var u=n(975),g=n(248),d=n(477);n.p,n.p;const f=n.p+"img/CustomServerIcon__BJSUK.png",p=n.p+"img/check__DcMEB.png",y=n.p+"img/check_x__E2mZ5.png",h=n.p+"img/check_y__zmy4v.png";function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(){var e,t,n=(e=l.useReducer((function(e){return e+1}),0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];return l.createElement("div",{className:"Settings"},[{type:"tf",name:"setting.use3Dmodel",value:"use3Dmodel"},{type:"range",name:"Crosshair opacity",min:0,max:10,step:1,value:"csOP"},{type:"range",name:"Shadow map quality",min:.01,max:50,step:.01,value:"shadowQ"},{type:"range",name:"Pixel scale",min:1,max:15,step:1,value:"pixelScale"},{type:"tf",name:"Ambient Occlusion",value:"AO"},{type:"tf",name:"Bloom",value:"Bloom"},{type:"tf",name:"Depth of Field",value:"DoF"},{type:"tf",name:"Vignette",value:"Vignette"},{type:"tf",name:"Antialiasing",value:"antialiasing"},{type:"range",name:"Antialiasing mode",min:0,max:2,step:1,value:"antialiasingMode"}].map((function(e){return"tf"==e.type?l.createElement("div",{key:e.name,className:"SettingsLine"},l.createElement("h3",null,e.name),l.createElement("div",{className:"TF",onClick:function(){localStorage.setItem("setting."+e.value,"true"==localStorage.getItem("setting."+e.value)?"false":"true"),n()}},l.createElement("img",{src:p}),l.createElement("img",{src:"true"==localStorage.getItem("setting."+e.value)?h:y}))):"range"==e.type?l.createElement("div",{key:e.name,className:"SettingsLine"},l.createElement("h3",null,e.name),l.createElement("input",{type:"range",step:e.step,min:e.min,max:e.max,value:parseInt(localStorage.getItem("setting."+e.value)),onChange:function(t){localStorage.setItem("setting."+e.value,t.target.value),n()}})):void 0})))}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b(e){var t=e.Spin1,n=e.Spin2,r=e.LightRef,i=(0,a.y)(),o=i.gl;i.camera,o.shadowMap.enabled=!0,(0,a.z)((function(){t.current&&n.current&&(t.current.rotateZ(.005),n.current.rotateZ(.005))})),(0,l.useEffect)((function(){r.current&&(console.log(r.current.shadow),r.current.shadow.mapSize=new d.Vector2(1024*parseFloat(localStorage.getItem("setting.shadowQ")),1024*parseFloat(localStorage.getItem("setting.shadowQ"))))}),[r])}function I(e){var t=S((0,l.useState)(1),2),n=(t[0],t[1],S((0,l.useState)(),2)),a=(n[0],n[1]),i=S((0,l.useState)(0),2),c=i[0],p=i[1],y=S((0,l.useState)(!1),2),h=y[0],E=y[1];(0,l.useEffect)((function(){window.addEventListener("keyup",(function(e){"p"==e.key&&E(!0)}))}),[]),new d.Vector2(4092,4092);var w=(0,l.useRef)(),I=(0,l.useRef)(),x=(0,l.useRef)(),k=S((0,l.useState)(!1),2),N=k[0],_=k[1],P=S((0,l.useState)(!1),2),L=P[0],A=P[1],C=S((0,l.useState)(!1),2),F=C[0],T=C[1],O=((0,l.useRef)(),(0,o.L)(m)),B=O.nodes,R=O.materials,j=S(l.useReducer((function(e){return e+1}),0),2)[1];return(0,l.useEffect)((function(){document.getElementById("MenuSong").volume=.15,document.getElementById("MenuSong").play()}),[]),l.createElement(l.Fragment,null,l.createElement("audio",{id:"MenuSong",autoPlay:!1,loop:!1,src:s}),l.createElement("div",{className:"MainMenu"},l.createElement("div",{className:"MenuButtons"},l.createElement("button",{onClick:function(){_(!0)}},"Play"),l.createElement("button",{disabled:!0},"Inventory"),l.createElement("button",{onClick:function(){A(!0)}},"Settings"),l.createElement("button",{onClick:function(){T(!0)}},"Mods")),1==F?l.createElement(l.Fragment,null,l.createElement("div",{className:"PluginList"},window.API.Plugins.List?window.API.Plugins.List.map((function(e,t){return l.createElement("div",{className:"PluginItem",key:t},l.createElement("img",{src:e.image}),l.createElement("h3",null,e.name),l.createElement("h4",null,e.author),l.createElement("h5",null,e.pluginID),"Ten mod zostanie usunięty po restarcie duckengine/%gamename%"==window.API.Plugins.List[t].pluginID?"":l.createElement("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("df_extenstions"));e.splice(t,1),localStorage.setItem("df_extenstions",JSON.stringify(e)),window.API.Plugins.List[t].pluginID="Ten mod zostanie usunięty po restarcie duckengine/%gamename%",j()}},"Usuń"))})):l.createElement("h3",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontFamily:"'Pixel', sans-serif",fontWeight:"100"}},"Nie masz żadnych modów :(")),l.createElement("div",{onClick:function(){T(!1)},className:"BG"})):"",1==N?l.createElement(l.Fragment,null,l.createElement("div",{className:"MenuButtons PlayMenu"},l.createElement("div",{className:"PlayMenuSelect"},l.createElement("img",{src:f}),l.createElement("h2",null,"Własny serwer"),l.createElement("input",{value:window.ServerIP,onChange:function(e){window.ServerIP=e.target.value,j()},type:"text"}),l.createElement("button",{onClick:function(){var e;1==(e=window.ServerIP.split(":")[0],!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e))||1==function(e){var t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}(window.ServerIP)?(window.location.hash="#game",window.isGame=!0,window.forceUpdate()):console.log("Invalid IP")}},"Settings"))),l.createElement("div",{onClick:function(){_(!1)},className:"BG"})):"",1==L?l.createElement(l.Fragment,null,l.createElement(v,null),l.createElement("div",{onClick:function(){A(!1)},className:"BG"})):"",l.createElement(r.Xz,{dpr:(Math.min(window.devicePixelRatio),2/12*parseFloat(localStorage.getItem("setting.pixelScale"))),shadows:{autoUpdate:!0,enabled:!0,type:d.PCFSoftShadowMap}},l.createElement(b,{Spin1:w,Spin2:I,LightRef:x}),l.createElement(M,{nodes:B,materials:R,Spin1:w,Spin2:I,LightRef:x}),l.createElement(u.xC,{multisampling:0},"false"!=localStorage.getItem("setting.DoF")?l.createElement(u.y8,{focusDistance:0,focalLength:.06,bokehScale:2,height:480}):"","false"!=localStorage.getItem("setting.Bloom")?l.createElement(u.dp,{luminanceThreshold:0,luminanceSmoothing:10,height:300}):"","false"!=localStorage.getItem("setting.Vignette")?l.createElement(u.sY,{eskil:!1,offset:.1,darkness:1.1}):"","false"!=localStorage.getItem("setting.antialiasing")?l.createElement(u.k,{preset:1,edgeDetectionMode:parseInt(localStorage.getItem("setting.antialiasingMode"))}):"","false"!=localStorage.getItem("setting.AO")?l.createElement(l.Fragment,null,l.createElement(u.K,{blendFunction:g.YQ.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,scale:.5,bias:.5}),l.createElement(u.K,{blendFunction:g.YQ.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:40,scale:.5,bias:.5})):""))),1==h?l.createElement("div",{className:"ExtenstionInstaller"},l.createElement("div",{className:"ExtenstionView NativeWindow"},l.createElement("h2",{className:"h2"},"duckengine/$gamename$ ",l.createElement("a",{href:"#",class:"close"},"Close")),l.createElement("div",{className:"ViewObject",style:{left:"".concat(c,"%")}},l.createElement("div",{className:"file-input"},l.createElement("input",{type:"file",accept:".dmodfile",onChange:function(e){a(e.target.files[0]),p(-100);var t=new FileReader;t.readAsText(e.target.files[0],"UTF-8"),t.onload=function(e){1==e.target.result.includes('"forApp": "148962"')?setTimeout((function(){null==localStorage.getItem("df_extenstions")&&localStorage.setItem("df_extenstions",JSON.stringify([]));var t=JSON.parse(localStorage.getItem("df_extenstions")),n=document.createElement("script");n.innerHTML=e.target.result,document.body.appendChild(n),console.log(window.ExtensionManifest),t.push({manifest:window.ExtensionManifest[window.ExtensionManifest.length-1],script:e.target.result}),localStorage.setItem("df_extenstions",JSON.stringify(t)),setTimeout((function(){window.location.reload()}),700)}),1500):setTimeout((function(){p(-200)}),300)},t.onerror=function(e){setTimeout((function(){console.error("Error reading extension"),p(-200)}),2e3)}}}),l.createElement("span",{className:"button"},"Wybierz plik .dmodfile lub przeciągnij go tu")),l.createElement("div",{className:"ExtenstionButtonLine"},l.createElement("button",{onClick:function(){E(!1)}},"Anuluj"))),l.createElement("div",{className:"ViewObject",id:"installing",style:{left:"".concat(c,"%")}},l.createElement("h2",{className:"InstallText"},"Instaluję..."),l.createElement("div",{className:"ExtenstionButtonLine"})),l.createElement("div",{className:"ViewObject",style:{left:"".concat(c,"%")}},l.createElement("h2",{className:"InstallText"},"Wystąpił błąd"),l.createElement("div",{className:"ExtenstionButtonLine"})))):"")}function M(e){e.Spin1,e.Spin2;var t=e.nodes,n=e.materials,a=e.LightRef;return l.createElement("group",{dispose:null},l.createElement("group",{position:[0,3.04,-.19]},l.createElement("mesh",{geometry:t.cube012.geometry,material:n["Material_0.001"]}),l.createElement("mesh",{geometry:t.pyramid.geometry,material:n["Material_0.001"]})),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube062.geometry,material:n["Material_0.012"]}),l.createElement("group",{position:[0,3.21,0],rotation:[0,0,0]},l.createElement("spotLight",{intensity:1,angle:.78,penumbra:1,decay:2,castShadow:!0,ref:a,rotation:[-Math.PI/2,0,0]}),l.createElement("ambientLight",{intensity:.06})),l.createElement("group",{position:[-.1,1.51,-6.32],rotation:[Math.PI/2,0,Math.PI]},l.createElement(c.c,{makeDefault:!0,far:1e3,near:.1,fov:22.9,rotation:[-Math.PI/2,0,0]})),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube014.geometry,material:n["Material_0.003"],position:[0,0,.84]}),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube015.geometry,material:n["Material_0.004"],position:[-3,0,.84]}),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube013.geometry,material:n["Material_0.002"],position:[2.99,0,.84]}),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube018.geometry,material:n["Material_0.007"],position:[2.99,2.23,.84]}),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube017.geometry,material:n["Material_0.006"],position:[0,2.23,.84]}),l.createElement("mesh",{receiveShadow:!0,geometry:t.cube016.geometry,material:n["Material_0.005"],position:[-3,2.23,.84]}))}(0,i.v)(),o.L.preload(m)}}]);